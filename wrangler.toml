name = "dawarich-cleaner"
main = "src/main.py"
compatibility_date = "2024-01-01"
compatibility_flags = ["python_workers"]

# Workers for Python configuration
[build]
command = ""

# Cron Triggers
# Runs daily at 2 AM UTC to scan last 7 days
[triggers]
crons = ["0 2 * * *"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "dawarich-cleaner"
database_id = "b474c9d0-5ba9-44fb-8f21-cec1654a5151"

# Production environment
[env.production]
routes = [
  { pattern = "dawarich-cleaner.yba.dev/*", zone_name = "yba.dev" }
]

# D1 Database for production
[[env.production.d1_databases]]
binding = "DB"
database_name = "dawarich-cleaner"
database_id = "b474c9d0-5ba9-44fb-8f21-cec1654a5151"

# Secrets for production (set with: pywrangler secret put SECRET_NAME --env production)
# DAWARICH_API_URL - Your Dawarich instance URL
# DAWARICH_API_KEY - Your Dawarich API key
# ENVIRONMENT=production
